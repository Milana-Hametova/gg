<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ролевая Грань - Главная</title>
</head>

<body style="display: flex; justify-content: center; align-items: center; height: 100vh;">

    <h1>Привет!</h1>

    <button onclick="authenticateWithTelegram()">Авторизоваться в Telegram</button>

    <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="bot338_bot" data-size="large"
        data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
    <script type="text/javascript">
        function authenticateWithTelegram() {
            var telegramButton = document.querySelector('[data-telegram-login]');
            telegramButton.click();
        }

        function onTelegramAuth(user) {
            alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');

            // Отправить сообщение от бота в Telegram
            sendMessageToTelegramBot(user.id);

            // Выполнить Python-код
            executePythonCode();
        }

        function sendMessageToTelegramBot(userId) {
            // AJAX запрос на отправку сообщения
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage?chat_id=" + userId + "&text=Сообщение от бота");
            xhr.send();
        }

        function executePythonCode() {
            // Ваш Python-код здесь
            alert('Python код будет выполнен');
        }
    </script>

</body>

</html>
